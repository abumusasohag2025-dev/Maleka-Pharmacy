Action: {"tool_name": "mcp_bulk_file_writer", "tool_arguments": {"files": [{"path": "/app/frontend/src/App.js", "content": "import React from 'react';\nimport { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom';\nimport './App.css';\nimport Home from './pages/Home';\nimport HealthBlogs from './pages/HealthBlogs';\nimport Login from './pages/Login';\nimport Signup from './pages/Signup';\nimport CustomerDashboard from './pages/CustomerDashboard';\nimport AdminDashboard from './pages/AdminDashboard';\nimport ProtectedRoute from './components/ProtectedRoute';\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/health-blogs\" element={<HealthBlogs />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/signup\" element={<Signup />} />\n        <Route \n          path=\"/customer-dashboard\" \n          element={\n            <ProtectedRoute requiredRole=\"customer\">\n              <CustomerDashboard />\n            </ProtectedRoute>\n          } \n        />\n        <Route \n          path=\"/admin-dashboard\" \n          element={\n            <ProtectedRoute requiredRole=\"admin\">\n              <AdminDashboard />\n            </ProtectedRoute>\n          } \n        />\n        <Route path=\"*\" element={<Navigate to=\"/\" replace />} />\n      </Routes>\n    </BrowserRouter>\n  );\n}\n\nexport default App;"}, {"path": "/app/frontend/src/utils/auth.js", "content": "export const setAuthToken = (token) => {\n  localStorage.setItem('token', token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem('token');\n};\n\nexport const removeAuthToken = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n};\n\nexport const setUser = (user) => {\n  localStorage.setItem('user', JSON.stringify(user));\n};\n\nexport const getUser = () => {\n  const user = localStorage.getItem('user');\n  return user ? JSON.parse(user) : null;\n};\n\nexport const isAuthenticated = () => {\n  return !!getAuthToken();\n};\n\nexport const logout = () => {\n  removeAuthToken();\n  window.location.href = '/login';\n};"}, {"path": "/app/frontend/src/utils/api.js", "content": "import axios from 'axios';\nimport { getAuthToken, removeAuthToken } from './auth';\n\nconst BACKEND_URL = process.env.REACT_APP_BACKEND_URL;\nconst API_BASE = `${BACKEND_URL}/api`;\n\nconst api = axios.create({\n  baseURL: API_BASE,\n});\n\n// Add token to requests\napi.interceptors.request.use(\n  (config) => {\n    const token = getAuthToken();\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Handle 401 errors\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      removeAuthToken();\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"}, {"path": "/app/frontend/src/components/ProtectedRoute.js", "content": "import React from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { isAuthenticated, getUser } from '../utils/auth';\n\nconst ProtectedRoute = ({ children, requiredRole }) => {\n  if (!isAuthenticated()) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  const user = getUser();\n  \n  if (requiredRole && user?.role !== requiredRole) {\n    // Redirect to appropriate dashboard based on user role\n    if (user?.role === 'admin') {\n      return <Navigate to=\"/admin-dashboard\" replace />;\n    } else {\n      return <Navigate to=\"/customer-dashboard\" replace />;\n    }\n  }\n\n  return children;\n};\n\nexport default ProtectedRoute;"}, {"path": "/app/frontend/src/components/Navbar.js", "content": "import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { isAuthenticated, getUser, logout } from '../utils/auth';\n\nconst Navbar = () => {\n  const navigate = useNavigate();\n  const authenticated = isAuthenticated();\n  const user = getUser();\n\n  return (\n    <nav className=\"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg\">\n      <div className=\"container mx-auto px-4 py-4\">\n        <div className=\"flex justify-between items-center\">\n          <div \n            className=\"text-2xl font-bold cursor-pointer flex items-center gap-2\"\n            onClick={() => navigate('/')}\n            data-testid=\"navbar-logo\"\n          >\n            <span className=\"text-3xl\">\ud83c\udfe5</span>\n            <span>Maleka Pharmacy</span>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => navigate('/')}\n              className=\"hover:text-emerald-100 transition\"\n              data-testid=\"nav-home-btn\"\n            >\n              Home\n            </button>\n            <button\n              onClick={() => navigate('/health-blogs')}\n              className=\"hover:text-emerald-100 transition\"\n              data-testid=\"nav-blogs-btn\"\n            >\n              Health Blogs\n            </button>\n            \n            {authenticated ? (\n              <>\n                <button\n                  onClick={() => navigate(user?.role === 'admin' ? '/admin-dashboard' : '/customer-dashboard')}\n                  className=\"bg-white text-emerald-600 px-4 py-2 rounded-lg font-semibold hover:bg-emerald-50 transition\"\n                  data-testid=\"nav-dashboard-btn\"\n                >\n                  Dashboard\n                </button>\n                <button\n                  onClick={logout}\n                  className=\"bg-red-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-600 transition\"\n                  data-testid=\"nav-logout-btn\"\n                >\n                  Logout\n                </button>\n              </>\n            ) : (\n              <>\n                <button\n                  onClick={() => navigate('/login')}\n                  className=\"bg-white text-emerald-600 px-4 py-2 rounded-lg font-semibold hover:bg-emerald-50 transition\"\n                  data-testid=\"nav-login-btn\"\n                >\n                  Login\n                </button>\n                <button\n                  onClick={() => navigate('/signup')}\n                  className=\"bg-emerald-800 text-white px-4 py-2 rounded-lg font-semibold hover:bg-emerald-900 transition\"\n                  data-testid=\"nav-signup-btn\"\n                >\n                  Sign Up\n                </button>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;"}]}, "type": "mcp_tool"}
Observation: Successfully wrote 5 files:
- /app/frontend/src/App.js
- /app/frontend/src/utils/auth.js
- /app/frontend/src/utils/api.js
- /app/frontend/src/components/ProtectedRoute.js
- /app/frontend/src/components/Navbar.js